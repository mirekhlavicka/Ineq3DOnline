{"name":"Torus\\Beer mug","x0":-1.0,"y0":-1.0,"z0":-1.0,"x1":1.0,"y1":1.0,"z1":1.0,"maxDivisionCount":12,"quality":false,"curvatureQuality":false,"formula":"[advanced]\r\n\r\npublic static IneqTree TorusPQ(double x0, double y0, double z0, double r, double R)\r\n{\r\n\r\n    return new IneqTree((x, y, z) =>\r\n    {\r\n\t\tdouble p, q;\r\n\r\n      \tx = x - x0;\r\n        y = y - y0;\r\n        z = z - z0;      \r\n\r\n      \tp = z < 0 ? 2 : 8;\r\n      \tq = 10;\r\n      \r\n      \tdouble pn = pow(pow(abs(x), p) + pow(abs(z), p), 1.0d/p);\r\n      \r\n      \tdouble sx =  R * x / pn;\r\n      \tdouble sz =  R * z / pn;\r\n\r\n\t\tdouble v = sqrt((x-sx)*(x-sx) + (z-sz)*(z-sz));\r\n      \r\n      \treturn pow(pow(y, q) + pow(2*v, q), 1.0/q) - r;\r\n\r\n    });\r\n}\r\n\r\npublic IneqMesh GetIneqMesh()\r\n{\r\n    var res = new IneqMesh\r\n    {\r\n        X0 = -1.1,\r\n        Y0 = -1.1,\r\n        Z0 = -1.1,\r\n        X1 = 1.5,\r\n        Y1 = 1.1,\r\n        Z1 = 1.1,\r\n        D = 0.1d,\r\n        Boxed = false,\r\n        IneqTree =  (TorusPQ(0.49, 0, 0, 0.15, 0.7) | Cylinder(0, 0 ,-1, 0, 0 ,1, 0.7, 1)) &\r\n          !Cylinder(0, 0 ,-0.9, 0, 0 ,1.1, 0.6, 1)\r\n      };\r\n  \r\n\tres.PrepareBackgroundMeshBeforeApriory = () => \r\n    {\r\n        for (int i = 0; i < 3; i++)\r\n        {\r\n      \t\tres.RefineTetrahedralMesh(0, 2, 0.05, false);\r\n      \t\tres.JiggleBackgroundMash(3);\r\n        }     \r\n    };  \r\n  \r\n\treturn res;  \r\n}\r\n"}